# æœ¬ç•ªç›£è¦–ã®æœ€çµ‚ç¢ºèª - å®Ÿæ–½ã‚¬ã‚¤ãƒ‰

## âœ… ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ç¢ºèªçµæœ

**ç¢ºèªæœŸé–“:** éå»1æ™‚é–“ã€éå»24æ™‚é–“
**çµæœ:** ERRORãƒ¬ãƒ™ãƒ«ã®ãƒ­ã‚°ã¯æ¤œå‡ºã•ã‚Œã¾ã›ã‚“ã§ã—ãŸ âœ…

**ç¢ºèªã—ãŸãƒ•ã‚£ãƒ«ã‚¿:**
- `severity>=ERROR AND resource.type="cloud_function"`
- `severity>=ERROR AND jsonPayload.message=~"CRITICAL: å‹•ç”»å‡¦ç†ã‚¨ãƒ©ãƒ¼"`
- `severity>=ERROR AND jsonPayload.message=~"LINE API"`

**çµè«–:** ã‚·ã‚¹ãƒ†ãƒ ã¯æ­£å¸¸ã«å‹•ä½œã—ã¦ãŠã‚Šã€é‡å¤§ãªã‚¨ãƒ©ãƒ¼ã¯ç™ºç”Ÿã—ã¦ã„ã¾ã›ã‚“ã€‚

---

## ğŸ“± LIFFçµŒç”±ã®äºˆç´„ãƒªãƒ³ã‚¯ã¨å‹•ç”»ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ†ã‚¹ãƒˆ

### LIFFã‚¢ãƒ—ãƒªã®æœ¬ç•ªURL

**LIFF ID:** `2008276179-XxwM2QQD`

**æœ¬ç•ªURL:**
```
https://liff.line.me/2008276179-XxwM2QQD
```

**Netlifyãƒ‡ãƒ—ãƒ­ã‚¤URL:**
- Netlifyã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ç¢ºèªã—ã¦ãã ã•ã„
- é€šå¸¸ã¯ `https://your-site-name.netlify.app` ã®å½¢å¼

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆæ‰‹é †

### ã‚¹ãƒ†ãƒƒãƒ—1: LIFFã‚¢ãƒ—ãƒªã¸ã®ã‚¢ã‚¯ã‚»ã‚¹

1. **LINEã‚¢ãƒ—ãƒªã‚’é–‹ã**
   - ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ç‰ˆLINEã‚¢ãƒ—ãƒªã¾ãŸã¯PCç‰ˆLINEãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒª

2. **LIFF URLã«ã‚¢ã‚¯ã‚»ã‚¹**
   - æ–¹æ³•1: LINEã‚¢ãƒ—ãƒªå†…ã§è‡ªåˆ†ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ã‚Šã€LIFF URLã‚’è²¼ã‚Šä»˜ã‘ã¦ã‚¯ãƒªãƒƒã‚¯
   - æ–¹æ³•2: ãƒªãƒƒãƒãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ï¼ˆè¨­å®šæ¸ˆã¿ã®å ´åˆï¼‰
   - URL: `https://liff.line.me/2008276179-XxwM2QQD`

3. **ç¢ºèªäº‹é …:**
   - [ ] LIFFã‚¢ãƒ—ãƒªãŒæ­£å¸¸ã«é–‹ã
   - [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã‚‹
   - [ ] Firebaseèªè¨¼ãŒæˆåŠŸã™ã‚‹
   - [ ] å‹•ç”»ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒ ãŒè¡¨ç¤ºã•ã‚Œã‚‹

### ã‚¹ãƒ†ãƒƒãƒ—2: å‹•ç”»ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ†ã‚¹ãƒˆ

1. **å‹•ç”»ã‚’é¸æŠ**
   - æ¨å¥¨: iPhoneã¾ãŸã¯Androidã§5-20ç§’ã®å‹•ç”»ã‚’æ’®å½±
   - ã‚µã‚¤ã‚º: 10-50MBç¨‹åº¦

2. **ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰é–‹å§‹**
   - [ ] ã€Œå‹•ç”»ã‚’é¸æŠã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
   - [ ] å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ
   - [ ] ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãŒé–‹å§‹ã•ã‚Œã‚‹

3. **é€²æ—ç¢ºèª**
   - [ ] é€²æ—ãƒãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹
   - [ ] é€²æ—ãŒé©åˆ‡ã«æ›´æ–°ã•ã‚Œã‚‹
   - [ ] ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å®Œäº†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹

### ã‚¹ãƒ†ãƒƒãƒ—3: å‡¦ç†ç¢ºèª

1. **Cloud Functionsã®ãƒ­ã‚°ç¢ºèª**
   ```bash
   # æœ€æ–°ã®ãƒ­ã‚°ã‚’ç¢ºèª
   gcloud logging read 'resource.type="cloud_function"' \
     --limit=10 \
     --format="table(timestamp,severity,resource.labels.function_name,jsonPayload.message)" \
     --project=aikaapp-584fa \
     --freshness=10m
   ```

2. **ç¢ºèªäº‹é …:**
   - [ ] `process_video_trigger`é–¢æ•°ãŒå®Ÿè¡Œã•ã‚Œã‚‹
   - [ ] å‹•ç”»è§£æãŒé–‹å§‹ã•ã‚Œã‚‹
   - [ ] è§£æçµæœãŒFirestoreã«ä¿å­˜ã•ã‚Œã‚‹
   - [ ] Dify APIãŒå‘¼ã³å‡ºã•ã‚Œã‚‹
   - [ ] LINEãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒé€ä¿¡ã•ã‚Œã‚‹

### ã‚¹ãƒ†ãƒƒãƒ—4: LINE Botå¿œç­”ç¢ºèª

1. **LINE Botã‹ã‚‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç¢ºèª**
   - [ ] å‹•ç”»å—ä»˜ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå±Šã
   - [ ] è§£æå®Œäº†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå±Šã
   - [ ] AIKAã®ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è¨­å®šãŒåæ˜ ã•ã‚Œã¦ã„ã‚‹
   - [ ] ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å†…å®¹ãŒé©åˆ‡

2. **ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ã®ç¢ºèªï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰**
   - [ ] 100MBè¶…éæ™‚ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
   - [ ] 20ç§’è¶…éæ™‚ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸

---

## ğŸ“Š ç›£è¦–ã‚¯ã‚¨ãƒª

### ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–

**ã™ã¹ã¦ã®ãƒ­ã‚°ï¼ˆINFOä»¥ä¸Šï¼‰:**
```
resource.type="cloud_function"
severity>=INFO
```

**ã‚¨ãƒ©ãƒ¼ã®ã¿:**
```
severity>=ERROR
resource.type="cloud_function"
```

**å‹•ç”»å‡¦ç†ã®æˆåŠŸãƒ­ã‚°:**
```
resource.type="cloud_function"
jsonPayload.message=~"âœ….*å‡¦ç†å®Œäº†"
```

**LINEé€ä¿¡ã®æˆåŠŸãƒ­ã‚°:**
```
resource.type="cloud_function"
jsonPayload.message=~"âœ….*LINEãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡æˆåŠŸ"
```

---

## âœ… ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ç¢ºèª
- [x] éå»1æ™‚é–“ã®ERRORãƒ­ã‚°: ãªã—
- [x] éå»24æ™‚é–“ã®ERRORãƒ­ã‚°: ãªã—
- [x] é‡å¤§ãªã‚¨ãƒ©ãƒ¼ï¼ˆCRITICALï¼‰: ãªã—

### LIFFã‚¢ãƒ—ãƒªãƒ†ã‚¹ãƒˆ
- [ ] LIFFã‚¢ãƒ—ãƒªãŒæ­£å¸¸ã«é–‹ã
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] Firebaseèªè¨¼ãŒæˆåŠŸã™ã‚‹
- [ ] å‹•ç”»ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒ ãŒè¡¨ç¤ºã•ã‚Œã‚‹

### å‹•ç”»ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ†ã‚¹ãƒˆ
- [ ] å‹•ç”»é¸æŠãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹
- [ ] ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãŒé–‹å§‹ã•ã‚Œã‚‹
- [ ] é€²æ—è¡¨ç¤ºãŒé©åˆ‡ã«æ›´æ–°ã•ã‚Œã‚‹
- [ ] ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å®Œäº†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã‚‹

### å‡¦ç†ç¢ºèª
- [ ] Cloud FunctionsãŒå®Ÿè¡Œã•ã‚Œã‚‹
- [ ] å‹•ç”»è§£æãŒæˆåŠŸã™ã‚‹
- [ ] Firestoreã«çµæœãŒä¿å­˜ã•ã‚Œã‚‹
- [ ] Dify APIãŒå‘¼ã³å‡ºã•ã‚Œã‚‹
- [ ] LINEãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒé€ä¿¡ã•ã‚Œã‚‹

### LINE Botå¿œç­”ç¢ºèª
- [ ] å‹•ç”»å—ä»˜ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå±Šã
- [ ] è§£æå®Œäº†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå±Šã
- [ ] ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å†…å®¹ãŒé©åˆ‡

---

## ğŸ¯ ãƒ†ã‚¹ãƒˆå®Œäº†å¾Œã®ç¢ºèª

### 1. ãƒ­ã‚°ã®å†ç¢ºèª

```bash
# ãƒ†ã‚¹ãƒˆå¾Œã®ãƒ­ã‚°ã‚’ç¢ºèª
gcloud logging read 'resource.type="cloud_function"' \
  --limit=20 \
  --format="table(timestamp,severity,resource.labels.function_name,jsonPayload.message)" \
  --project=aikaapp-584fa \
  --freshness=10m
```

### 2. ã‚¨ãƒ©ãƒ¼ã®æœ‰ç„¡ç¢ºèª

```bash
# ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ã‚’ç¢ºèª
gcloud logging read 'severity>=ERROR' \
  --limit=10 \
  --format="json" \
  --project=aikaapp-584fa \
  --freshness=10m
```

### 3. æˆåŠŸãƒ­ã‚°ã®ç¢ºèª

```bash
# æˆåŠŸãƒ­ã‚°ã‚’ç¢ºèª
gcloud logging read 'jsonPayload.message=~"âœ…"' \
  --limit=10 \
  --format="table(timestamp,severity,jsonPayload.message)" \
  --project=aikaapp-584fa \
  --freshness=10m
```

---

## ğŸ“ ãƒ†ã‚¹ãƒˆçµæœã®è¨˜éŒ²

ãƒ†ã‚¹ãƒˆå®Ÿæ–½å¾Œã€ä»¥ä¸‹ã‚’è¨˜éŒ²ã—ã¦ãã ã•ã„ï¼š

- **ãƒ†ã‚¹ãƒˆæ—¥æ™‚:** 
- **ãƒ†ã‚¹ãƒˆç«¯æœ«:** iPhone / Android / PC
- **å‹•ç”»å½¢å¼:** video/quicktime / video/mp4
- **å‹•ç”»ã‚µã‚¤ã‚º:** MB
- **å‹•ç”»é•·ã•:** ç§’
- **çµæœ:** æˆåŠŸ / å¤±æ•—
- **ã‚¨ãƒ©ãƒ¼å†…å®¹:** ï¼ˆå¤±æ•—ã®å ´åˆï¼‰
- **å‚™è€ƒ:** 

---

**æœ€çµ‚æ›´æ–°:** 2025-11-08
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹:** ãƒ†ã‚¹ãƒˆæº–å‚™å®Œäº† âœ…

