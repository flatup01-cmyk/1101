# 💻 PCでのテストガイド

## ✅ PCからもテストできます！

今回の最適化は、モバイルだけでなく**PC環境でも正常に動作**します。

---

## 🧪 テスト方法

### 方法1: PC版LINEデスクトップアプリでテスト（推奨）

1. **LINEデスクトップアプリを起動**（Windows/Mac）
2. **LIFF URLを開く**
   - メッセージとして送る
   - リッチメニューから開く（設定済みの場合）
3. **動画をアップロード**
   - 「…別に、アンタの動画を解析してやってもいいけど？」ボタンをクリック
   - 10秒以内、100MB以内の動画を選択
   - アップロード開始

**期待される動作**:
- ✅ 動画メタデータの読み込み（30秒以内）
- ✅ アップロード進捗の表示
- ✅ 成功メッセージの表示

---

### 方法2: 開発モードでブラウザからテスト

通常のブラウザ（Chrome, Safari等）でも、開発モードを使用してテストできます。

1. **開発モードでURLを開く**
   ```
   https://your-app-url.netlify.app/?dev=true
   ```

2. **動作確認**
   - LIFF認証がスキップされる
   - 仮のユーザーIDで動作
   - 動画アップロード機能がテスト可能

**注意**: 開発モードでは実際のLINE認証は行われませんが、アップロード機能の動作確認は可能です。

---

## 📊 PC vs モバイルの違い

### 共通の最適化

| 機能 | PC | モバイル |
|------|----|---------|
| タイムアウト設定 | ✅ 30秒 | ✅ 30秒 |
| LIFF認証リトライ | ✅ 3回 | ✅ 3回 |
| UI状態管理 | ✅ | ✅ |
| エラーメッセージ | ✅ | ✅ |

### PC特有の利点

- **ネットワーク速度**: 通常、PCの方が高速（タイムアウトが発生しにくい）
- **メモリ**: PCはモバイルより余裕がある
- **ブラウザ性能**: デスクトップブラウザは高性能

---

## ✅ テストチェックリスト

PCでのテスト時に確認すべき項目：

- [ ] **初期化**
  - [ ] LIFF認証が成功する（PC版LINEの場合）
  - [ ] 開発モードで動作する（`?dev=true`の場合）

- [ ] **ファイル選択**
  - [ ] ファイル選択ダイアログが開く
  - [ ] ボタンが無効化される（重複処理防止）
  - [ ] 読み込み中メッセージが表示される

- [ ] **動画検証**
  - [ ] ファイルサイズチェック（100MB制限）
  - [ ] 動画の長さチェック（10秒制限）
  - [ ] メタデータ読み込み（30秒以内）

- [ ] **アップロード**
  - [ ] アップロード進捗が表示される
  - [ ] 成功メッセージが表示される
  - [ ] エラー時に適切なメッセージが表示される

---

## 🔍 トラブルシューティング

### 問題1: PC版LINEで開けない

**確認事項**:
1. LINEデスクトップアプリが最新バージョンか
2. LIFF URLが正しいか
3. ネットワーク接続が正常か

---

### 問題2: 動画メタデータの読み込みが遅い

**原因**: PCでもネットワークが遅い場合、タイムアウトが発生する可能性があります

**対処**:
- 30秒以内に完了するはずですが、それ以上かかる場合はネットワークを確認
- 動画ファイルの形式を確認（.mp4推奨）

---

### 問題3: 開発モード（`?dev=true`）で動作しない

**確認事項**:
1. URLパラメータが正しく設定されているか
2. ブラウザのコンソール（F12）でエラーがないか確認
3. `src/main.js`の開発モード検出コードが正しいか確認

---

## 📝 テスト結果の報告

PCでのテストが完了したら、以下を確認してください：

1. **正常に動作した項目**
   - [ ] LIFF認証
   - [ ] 動画ファイル選択
   - [ ] メタデータ読み込み
   - [ ] アップロード

2. **エラーが発生した項目**（もしあれば）
   - エラーメッセージ
   - 発生タイミング
   - ブラウザ/OS情報

---

## 🎯 結論

**PCからもテストできます！**

今回の最適化により：
- ✅ モバイルで動作する
- ✅ PCでも動作する
- ✅ タイムアウト対策が両方で有効
- ✅ エラーハンドリングが両方で有効

PC版LINEデスクトップアプリまたは開発モード（`?dev=true`）でテストしてください。

---

**最終更新**: 2025-01-XX  
**作成者**: AI Assistant (Auto)

