# 🚀 再デプロイ手順（詳細版）

## 📋 ステップ1: Netlify Consoleで再デプロイを実行

### 手順

1. **Netlify ConsoleのDeploysタブを開く**
   - 現在開いているページのまま

2. **「Trigger deploy」ボタンをクリック**
   - ページ右上にある「Trigger deploy」ボタン

3. **「Deploy site」を選択**
   - ドロップダウンメニューから「Deploy site」を選択
   - または、「Deploy site without cache」を選択（キャッシュなしで再デプロイ）

4. **デプロイ開始**
   - 新しいデプロイがリストの一番上に表示されます
   - 状態が「Building」→「Published」に変わります

---

## ⏰ ステップ2: デプロイ完了を待つ

- **デプロイ時間**: 約2-3分
- **進行状況**: Deploysページでリアルタイムで確認できます

**完了の目安:**
- 状態が「Published」に変わる
- 緑色のチェックマークが表示される
- デプロイIDが表示される

---

## ✅ ステップ3: 動作確認

### 3-1. ブラウザを準備

1. **シークレットモード（プライベートウィンドウ）で開く**
   - Mac: `Cmd + Shift + N`
   - Windows: `Ctrl + Shift + N`
   - これはキャッシュの問題を避けるため

2. **アプリにアクセス**
   - URL: `https://aika18.netlify.app?dev=true`

### 3-2. コンソールで確認

1. **F12キーを押して開発者ツールを開く**
2. **「Console」タブを選択**
3. **以下が表示されるか確認**:

```
✅ Firebase初期化成功
✅ 開発モード: Firebase匿名認証成功
ユーザーID: [長い文字列]
```

**エラーが出る場合:**
- 環境変数が正しく設定されているか再確認
- デプロイログにエラーがないか確認

### 3-3. 動画アップロードをテスト

1. **「🎯 動画をセット」ボタンをクリック**
2. **動画ファイルを選択**（10MB以下推奨）
3. **「🚀 解析開始」ボタンをクリック**
4. **以下が表示されるか確認**:
   - アップロード進捗バーが0%から100%まで進行
   - 「DATA UPLOAD COMPLETE」が表示される

---

## 🔍 トラブルシューティング

### 問題1: まだ認証エラーが出る

**確認事項:**
1. デプロイが完了しているか確認
2. シークレットモードで開いているか確認
3. コンソールで実際に使われているAPIキーを確認:
   ```javascript
   console.log('API Key:', import.meta.env.VITE_FIREBASE_API_KEY)
   ```

### 問題2: アップロードが0%で止まる

**確認事項:**
1. コンソールに「✅ 開発モード: Firebase匿名認証成功」が表示されているか
2. エラーメッセージの詳細を確認
3. Firebase Console → Authentication → Sign-in method で「匿名」が有効か確認

---

## 📊 成功の確認

以下の条件が全て満たされれば成功です：

- ✅ コンソールに「✅ Firebase初期化成功」が表示される
- ✅ コンソールに「✅ 開発モード: Firebase匿名認証成功」が表示される
- ✅ 動画を選択できる
- ✅ アップロード進捗が0%から100%まで進行する
- ✅ 「DATA UPLOAD COMPLETE」が表示される

---

**最終更新:** 2025-01-XX  
**状態:** ✅ 再デプロイ手順完了

